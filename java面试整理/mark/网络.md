网络的核心在于**<u>标识</u>**和<u>**转发**</u>。

网络七层模型：

应用层：与计算机进行通讯的一个应用，为应用程序提供通讯服务，例如HTTP、FTP、NFS。

表示层：定义数据格式及加密。例如：加密、ASCII等。

会话层。

传输层：TCP和UDP。

网络层：网关/路由器，IP地址，用来标识设备在哪个网络下。

数据链路层：MAC层，交换机，ARP通过ip查设备的mac。

物理层：集线器层。





TCP/IP

三次握手：

第一次：客户端会发送一个建立连接的请求。其中会带上一个当前请求的序列号seq和syn标志位。

第二次：服务端接受到请求后，会返回一个请求，其中会携带同意连接的响应，还有seq（标记服务端的一次数据发送）和ack_seq（标识对客户端请求的第一个响应）。

第三次：客户端接收到服务器响应的时候，客户端就能确认服务端是能够正常接收和发送数据的，服务端再接收到客户端第一次请求的时候，也能过于确认客户端能够正常的发送请求。



至于第三次再握手的原因：

保证连接双工。

1. 确认客户端能够正常的发送和接收。
2. 网络可能不稳定。第一次的请求可能是网络延迟造成的，但服务器不清楚这是延迟造成的，他还会正常发送一个同意的响应，同时还会等客户端再发第三次握手。如果是延时造成的，那么客户端是不会再发送第三次的了。



四次挥手：

第一次挥手：客户端发送一个FIN，用来关闭客户端至服务端的数据传送。

第二次挥手：服务端收到FIN后，发送 一个ACK给客户端，确认序号为 收到 序号加1。

第三次挥手：服务端发送一个FIN，用来关闭服务端到客户端的数据传送。

第四次挥手：客户端收到FIN后，发送一个 ACK给服务端，确认序号为收到序号+1，服务端进入关闭状态。



至于为什么要四次 ？

双工。

服务端收到关闭连接的请求时，仅表示对方不再发送数据了，但是还能接收数据，不能立即关闭，还需将剩余数据发送，然后再发送FIN给对方，表示同意现在关闭连接。