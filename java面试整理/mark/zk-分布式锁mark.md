1.zk有哪些使用场景？

```
分布式协调：
A系统发送请求到mq，B系统消费处理后，A系统如何感知处理结果？
用zk
A系统发送请求后，在zk某个节点注册监听器，一旦B处理完了就修改那个节点，A可以收到通知。
```

```
分布式锁
	一个机器接受到请求，先去zk获取一把分布式锁，也就是创建一个节点，另外一个区创建发现创建不了。就只能等着
```

```
元数据/配置管理信息
	zk用作很多系统的配置信息的管理，比如kafka等分布式系统，包括dubbo注册中心
```

```
HA高可用
	比如hadoop、hdfs、yarn等大数据系统，选择zk做高可用机制，主备两个，主进程挂了立马通过zk感知到然后切换到备用进程。
```

2.分布式锁

```
互斥
不能死锁
容错
```

```
redis分布式锁
	RedLock算法。
	
	set key 随机值 nx px 过期时间
	
	nx - 只有key不存在的时候，才会设置成功
	px - 一定时间后过期
	
	随机值，主要用来判定这个锁是否是自己创的
```

```
zk分布式锁

某个节点创建临时node，创建成功，就获取。别的来创建，会失败，只能监听这个锁。
实际用的时候，会搞临时有序node。
```

